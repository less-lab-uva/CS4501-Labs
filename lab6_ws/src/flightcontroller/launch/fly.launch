<?xml version="1.0"?>
<launch>

  <arg name="logging" default="screen" />
  <arg name="ship_velocity" default="0.1" /> <!-- velocity between 0 and 5 m/s -->
  <arg name="ship_waypoints" default="[[2,6],[2,-4],[-2,-2],[4,-2],[-5,5],[4,4],[-6,-6]]" />
  <!-- <arg name="ship_waypoints" default="[[[8, 0], [6, 0], [4, 0] ,[2, 0] ,[0, 0], [2, 0], [4, 0], [6, 0], [8, 0]]]" /> -->
  <!-- Global as it is used by both ship_following_controller_node and ship_node -->
  <arg name="followed_epsilon" default="20"/>

  <include file="$(find flightgoggles)/launch/core.launch">
  </include>

  <include file="$(find visualizer)/launch/view.launch">
  </include>

  <include file="$(find flightcontroller)/launch/angle.launch">
  </include>

  <include file="$(find sensor_simulation)/launch/sensors.launch">
    <arg name="logging" default="$(arg logging)" />
    <arg name="ship_waypoints" default="$(arg ship_waypoints)" />
    <arg name="ship_velocity" default="$(arg ship_velocity)" />
    <arg name="followed_epsilon" default="$(arg followed_epsilon)" />
  </include>

  <node pkg="flightcontroller" type="attitude_thrust_controller.py" name="attitude_thrust_controller_node" output="screen">
  </node>

  <node pkg="simple_control" type="ship_following_controller.py" name="ship_following_controller_node" output="screen">
    <param name="gains/p_xy" type="double" value="0.01" />
    <param name="gains/i_xy" type="double" value="0.0" />
    <param name="gains/d_xy" type="double" value="1" />
    <param name="gains/p_z" type="double" value="0.5" />
    <param name="gains/i_z" type="double" value="0.0" />
    <param name="gains/d_z" type="double" value="30" />
    <param name="rate" type="int" value="10" />
  </node>

</launch>
